<link rel="stylesheet" href="//y.gtimg.cn/mediastyle/yqq/layout.css?max_age=25920000&amp;v=20180803">
<link rel="stylesheet" href="//y.gtimg.cn/mediastyle/yqq/search20180104.css?max_age=2592000&amp;v=20180104">
<link rel="stylesheet" type="text/css" href="https://stdl.qq.com/stdl/qqbrowser/floatlayer/css/qb-ie-remind.css?1539786040041">
<style type="text/css">.emojicon-m {
  min-height: 1em !important;
  min-width: 1em !important;
  max-height: 1em !important;
  max-width: 1em !important;
  vertical-align: middle !important;
  float: none !important;
  background-repeat: no-repeat;
  background-position: center center;
  background-size: contain;
  display: inline-block;
}

.songlist__list {
  display: inline-block;
  width: 263%;
}
</style>







<%= render :partial => "layouts/title" %>


<!-- 大搜索框区域 S -->
<div class="mod_search" style="background-image:url(//y.gtimg.cn/mediastyle/yqq/img/bg_search.jpg);" role="search">
  <div class="mod_search_input">

    <%= form_tag search_index_path, :method => :get do %>
      <%= text_field_tag :search, params[:search], class: "search_input__input", placeholder: "请输入搜索内容" %>
      <button class="search_input__btn"><i class="icon_search sprite"></i><%= submit_tag '搜索', class: "icon_txt" %>
      </button>
    <% end %>


  </div>
  <div class="mod_search_tips">热门搜索：<a href="javascript:;" class="search_tips__item js_smartbox_search" data-name="沙漠骆驼">沙漠骆驼</a><a href="javascript:;" class="search_tips__item js_smartbox_search" data-name="可不可以">可不可以</a><a href="javascript:;" class="search_tips__item js_smartbox_search" data-name="地铁等待">地铁等待</a><a href="javascript:;" class="search_tips__item js_smartbox_search" data-name="一百万个可能">一百万个可能</a><a href="javascript:;" class="search_tips__item js_smartbox_search" data-name="38度6">38度6</a>
  </div>
  <div class="js_smartbox">
    <div class="mod_search_other" style="">
      <div class="search_hot">
        <dl class="search_hot__list" aria-labelledy="search_hot__tit">
          <dt class="search_hot__tit">热门搜索</dt>
          <dd>

          </dd>

        </dl>
      </div>

      <div class="search_history">
        <dl class="search_history__list">
          <dt class="search_history__tit">搜索历史<a href="javascript:;" class="search_history__clear js_smartbox_delete_all"><i class="icon_history_clear"></i><span class="icon_txt">清空</span></a>
          </dt>

          <dd class="search_history__item">
            <a href="javascript:;" class="search_history__link js_smartbox_search js_left" data-name="旅途">旅途</a>
            <a href="javascript:;" class="search_history__delete js_smartbox_delete" data-name="旅途" title="删除"><i class="search_history__icon_delete"></i><span class="icon_txt">删除</span></a>
          </dd>

          <dd class="search_history__item">
            <a href="javascript:;" class="search_history__link js_smartbox_search js_left" data-name="周杰伦">周杰伦</a>
            <a href="javascript:;" class="search_history__delete js_smartbox_delete" data-name="周杰伦" title="删除"><i class="search_history__icon_delete"></i><span class="icon_txt">删除</span></a>
          </dd>

          <dd class="search_history__item">
            <a href="javascript:;" class="search_history__link js_smartbox_search js_left" data-name="可不可以">可不可以</a>
            <a href="javascript:;" class="search_history__delete js_smartbox_delete" data-name="可不可以" title="删除"><i class="search_history__icon_delete"></i><span class="icon_txt">删除</span></a>
          </dd>

        </dl>
      </div>
    </div>
    <div class="mod_search_result" style="">

      <!--单曲区域_S-->
      <div class="search_result__sort">
        <h4 class="search_result__tit"><i class="search_result__icon_song"></i>单曲</h4>
        <ul class="search_result__list">

          <li>
            <a href="javascript:;" class="search_result__link js_smartbox_song" data-docid="103464" data-id="103464" data-mid="002NJzdk2JLUIn" data-name="旅途">
              <span class="search_result__name"><span class="search_result__keyword">旅途</span></span>-
              <span class="search_result__singer">汪峰</span>
            </a>
          </li>

          <li>
            <a href="javascript:;" class="search_result__link js_smartbox_song" data-docid="213743997" data-id="213743997" data-mid="001B4T7X4X5HDo" data-name="旅途">
              <span class="search_result__name"><span class="search_result__keyword">旅途</span></span>-
              <span class="search_result__singer">朴树</span>
            </a>
          </li>

          <li>
            <a href="javascript:;" class="search_result__link js_smartbox_song" data-docid="101132970" data-id="101132970" data-mid="002RhvL501thz2" data-name="旅途·故乡">
              <span class="search_result__name"><span class="search_result__keyword">旅途</span>·故乡</span>-
              <span class="search_result__singer">齐栾</span>
            </a>
          </li>

          <li>
            <a href="javascript:;" class="search_result__link js_smartbox_song" data-docid="105719766" data-id="105719766" data-mid="002MRYfm4G4i6g" data-name="旅途">
              <span class="search_result__name"><span class="search_result__keyword">旅途</span></span>-
              <span class="search_result__singer">老狼</span>
            </a>
          </li>

        </ul>
      </div>
      <!--单曲区域_E-->


      <!--专辑区域_S-->
      <div class="search_result__sort">
        <h4 class="search_result__tit"><i class="search_result__icon_album"></i>专辑</h4>
        <ul class="search_result__list">

          <li>
            <a href="javascript:;" class="search_result__link js_smartbox_album" data-docid="116639" data-id="116639" data-mid="004TbdIb1iWKox" data-name="旅途狂欢">
              <span class="search_result__name"><span class="search_result__keyword">旅途</span>狂欢</span>
              <span class="search_result__singer">华语群星</span>
            </a>
          </li>

          <li>
            <a href="javascript:;" class="search_result__link js_smartbox_album" data-docid="49754" data-id="49754" data-mid="004dZTEM1yOL3O" data-name="旅途 愉快">
              <span class="search_result__name"><span class="search_result__keyword">旅途</span> 愉快</span>
              <span class="search_result__singer">郭富城</span>
            </a>
          </li>

        </ul>
      </div>
      <!--专辑区域_E-->


      <!--MV区域_S-->
      <div class="search_result__sort">
        <h4 class="search_result__tit"><i class="search_result__icon_mv"></i>MV</h4>
        <ul class="search_result__list">

          <li>
            <a href="javascript:;" class="search_result__link js_smartbox_mv" data-docid="1435004" data-id="1435004" data-mid="002Vxy1z0EBOCi" data-name="旅途" data-vid="k0025u1kq2f">
              <span class="search_result__name"><span class="search_result__keyword">旅途</span></span>-
              <span class="search_result__singer">朴树</span>
            </a>
          </li>

          <li>
            <a href="javascript:;" class="search_result__link js_smartbox_mv" data-docid="674556" data-id="674556" data-mid="001Ufklp2nTwIy" data-name="旅途" data-vid="f00199ugt7f">
              <span class="search_result__name"><span class="search_result__keyword">旅途</span></span>-
              <span class="search_result__singer">老狼</span>
            </a>
          </li>

        </ul>
      </div>
      <!--MV区域_E-->
    </div>
  </div>
</div>

<!-- 大搜索框区域 E -->
<div class="main" style="">
  <div class="main__inner">
    <!--搜索结果 S-->
    <div class="result">
      <!--直达区 S-->
      <div class="mod_intro mod_intro_singer" id="zhida_singer" style="display: none;">
      </div>
      <div class="mod_intro mod_intro_album" id="zhida_album" style="display:none;">
      </div>
      <!--直达区 E-->
      <!--结果导航 S-->
      <div class="mod_tab" role="nav">
        <a class="mod_tab__item js_tab mod_tab__current" href="javascript:;" data-tab="song">单曲</a>
        <a class="mod_tab__item js_tab" href="javascript:;" data-tab="album">专辑</a>
        <a class="mod_tab__item js_tab" href="javascript:;" data-tab="mv">MV</a>
        <a class="mod_tab__item js_tab" href="javascript:;" data-tab="playlist">歌单</a>
        <a class="mod_tab__item js_tab" href="javascript:;" data-tab="user">用户</a>
        <a class="mod_tab__item js_tab" href="javascript:;" data-tab="lyric">歌词</a>
      </div>
      <!--结果导航 E-->
      <!--结果列表 S-->
      <!-- 单曲 -->
      <div class="js_search_tab_cont search_tab_cont" id="song_box" style="display: block;">
        <div class="mod_songlist_toolbar">
          <a href="javascript:;" class="mod_btn js_all_play"><i class="mod_btn__icon_play"></i>播放全部</a>
          <a href="javascript:;" class="mod_btn js_all_fav"><i class="mod_btn__icon_add"></i>添加到</a>
          <a href="javascript:;" class="mod_btn js_all_down"><i class="mod_btn__icon_down"></i>下载</a>
          <a href="javascript:;" class="mod_btn js_batch"><i class="mod_btn__icon_batch"></i>批量操作</a>
        </div>
        <div class="mod_songlist">
          <ul class="songlist__header">
            <li class="songlist__edit songlist__edit--check sprite">
              <input type="checkbox" class="songlist__checkbox js_check_all">
            </li>
            <li class="songlist__header_name">歌曲</li>
            <li class="songlist__header_author">歌手</li>
            <li class="songlist__header_album">专辑</li>
            <li class="songlist__header_time">时长</li>
          </ul>
          <ul class="songlist__list">


          </ul>
        </div>
        <div class="mod_page_nav js_pager">
          <strong class="current">1</strong><a href="javascript:;" class="js_pageindex" data-index="2" hidefocus="">2</a><a href="javascript:;" class="js_pageindex" data-index="3" hidefocus="">3</a><a href="javascript:;" class="js_pageindex" data-index="4" hidefocus="">4</a><strong class="more">...</strong><a href="javascript:;" class="js_pageindex" data-index="20" hidefocus="">20</a><a href="javascript:;" class="next js_pageindex" data-index="2" title="下一页" hidefocus=""><span>&gt;</span></a>
        </div>
      </div>
      <!-- 专辑 -->
      <div class="js_search_tab_cont search_tab_cont" id="album_box" style="display: none;"></div>
      <!-- MV -->
      <div class="js_search_tab_cont search_tab_cont" id="mv_box" style="display: none;"></div>
      <!-- 歌单 -->
      <div class="js_search_tab_cont search_tab_cont" id="playlist_box" style="display: none;"></div>
      <!-- 用户 -->
      <div class="js_search_tab_cont search_tab_cont" id="user_box" style="display: none;"></div>
      <!-- 歌词 -->
      <button style="display:none;" class="mod_btn" id="defaultCopy"><i class="mod_btn__icon_copy"></i>复制歌词</button>
      <div class="js_search_tab_cont search_tab_cont" id="lyric_box" style="display: none;"></div>
      <!--结果为空 S-->
      <div class="search_tab_cont" id="none_box" style="display:none;">
        <div class="mod_search_none">
          <p>很抱歉，暂时没有找到与“<span class="c_tx_highlight js_none_keyword"></span>”相关的结果</p>
          <p>QQ音乐建议你：请检查输入的关键词是否有误或者过长</p>
          <p>或到<a href="//support.qq.com/discuss/602_1.shtml" rel="noopener" target="_blank" class="c_tx_highlight">QQ音乐反馈平台</a>，向我们投诉或提出建议。
          </p>
        </div>
      </div>

      <!--结果为空 E-->
      <div class="mod_loading" id="before_page" style="display: none;"><i class="icon_txt">加载中</i></div>
      <!--结果列表 E-->
    </div>
  </div>
</div>







<%= render :partial => "layouts/foot" %>









<script>
    var pages = 1;

    $.ajax({
        url: "http://s.music.qq.com/fcgi-bin/music_search_new_platform?t=0& n=5&aggr=1&cr=1&loginUin=0& inCharset=GB2312&outCharset=utf-8&notice=0& platform=jqminiframe.json&needNewCode=0&p=" + pages + "&catZhida=0& remoteplace=sizer.newclient.next_song&w=<%= @search %>",
        type: "get",
        // async:false,
        dataType: 'jsonp',
        jsonp: "jsonpCallback",
        success: function (data) {

            console.log(data);
           // console.log("http://s.music.qq.com/fcgi-bin/music_search_new_platform?t=0& n=5&aggr=1&cr=1&loginUin=0& inCharset=GB2312&outCharset=utf-8&notice=0& platform=jqminiframe.json&needNewCode=0&p=" + pages + "&catZhida=0& remoteplace=sizer.newclient.next_song&w=<%= @search %>");
          //获取得到了多少条歌曲

            var curnum=data.data.song.curnum;
            var orderBody = '';
            for(var i=0;i<data.data.song.list.length;i++){
                //歌曲名字
                var songname=data.data.song.list[i].fsong
                //歌曲是否有原唱
                var songlist__song_txt=data.data.song.list[i].lyric;
                //歌手名字
              var  singer_name=data.data.song.list[i].fsinger
                //专辑名字
                var album_name=data.data.song.list[i].albumName_hilight

                //歌手MID
                var singerMID=data.data.song.list[i].singerMID
                orderBody+='  <li class="" mid="105719766" ix="'+i+'">\n' +
                    '                              <!--\n' +
                    '                              hover : songlist__item--hover\n' +
                    '                              偶数行：songlist__item--even\n' +
                    '                              -->\n' +
                    '                              <div class="songlist__item songlist__item--hover" onmouseover="this.className=(this.className+\' songlist__item--hover\')" onmouseout="this.className=this.className.replace(/ songlist__item--hover/, \'\')">\n' +
                    '                                <div class="songlist__edit songlist__edit--check sprite">\n' +
                    '                                  <input type="checkbox" class="songlist__checkbox">\n' +
                    '                                </div>\n' +
                    '                                <div class="songlist__songname">\n' +
                    '                \n' +
                    '                \n' +
                    '                                  <a  class="songlist__icon songlist__icon_mv sprite" rel="noopener" target="_blank" title="MV"><span class="icon_txt">MV</span></a>\n' +
                    '                \n' +
                    '                                  <span class="songlist__songname_txt"><a  class="js_song" title="'+songname+'"><span class="c_tx_highlight" id="song_name">'+songname+'</span><span class="songlist__song_txt" id="songlist__song_txt">'+songlist__song_txt+'</span></a></span>\n' +
                    '                \n' +
                    '                                  <div class="mod_list_menu">\n' +
                    '                                    <a href="javascript:;" class="list_menu__item list_menu__play js_play" title="播放">\n' +
                    '                                      <i class="list_menu__icon_play"></i>\n' +
                    '                                      <span class="icon_txt">播放</span>\n' +
                    '                                    </a>\n' +
                    '                                    <a href="javascript:;" class="list_menu__item list_menu__add js_fav" title="添加到歌单" aria-haspopup="true">\n' +
                    '                                      <i class="list_menu__icon_add"></i>\n' +
                    '                                      <span class="icon_txt">添加到歌单</span>\n' +
                    '                                    </a>\n' +
                    '                                    <a href="javascript:;" class="list_menu__item list_menu__down js_down" title="下载" aria-haspopup="true">\n' +
                    '                                      <i class="list_menu__icon_down"></i>\n' +
                    '                                      <span class="icon_txt">下载</span>\n' +
                    '                                    </a>\n' +
                    '                                    <a href="javascript:;" class="list_menu__item list_menu__share js_share" title="分享" aria-haspopup="true">\n' +
                    '                                      <i class="list_menu__icon_share"></i>\n' +
                    '                                      <span class="icon_txt">分享</span>\n' +
                    '                                    </a>\n' +
                    '                                  </div>\n' +
                    '                                </div>\n' +
                    '                \n' +
                    '                \n' +
                    '                                <div class="songlist__artist" title="'+singer_name+'">\n' +
                    '                \n' +
                    '                \n' +
                    '                                  <a  data-singermid="'+singerMID+'" data-singerid="212" title="'+singer_name+'" class="singer_name">'+singer_name+'</a>\n' +
                    '                \n' +
                    '                                </div>\n' +
                    '                                <div class="songlist__album">\n' +
                    '                                  <a data-albummid="004OIsn73g0H8p" data-albumid="1301623"  title="'+album_name+'" class="album_name">'+album_name+'</a>\n' +
                    '                                </div>\n' +
                    '                                <div class="songlist__time">05:22</div>\n' +
                    '                                <div class="songlist__other">\n' +
                    '                \n' +
                    '                \n' +
                    '                                </div>\n' +
                    '                              </div>\n' +
                    '                \n' +
                    '                            </li>'
            }

            $('.songlist__list').append(orderBody);




        },
        error: function (e) {
            console.log('error');
        }
    });

</script>